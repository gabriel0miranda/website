<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>3rd GIG</title>
        <link href="./static/css/landing-page-style.css" rel="stylesheet" type="text/css" media="all">
        <link rel="icon" type="image/x-icon" href="./static/favicon.ico">
    </head>
    <body>
        <header></header>
        <div class="cabecalho">
            <div class="titulo">
                <h1>3rd GIG</h1>
            </div>
        </div>
        <div class="outer-outer-circle">
        <div class="outer-circle">
        <div class="inner-circle">
        <div class="inner-line">
        <div class="inner-inner-circle">
            <div class="fakelogin">
                <div class="boasvindas">
                    <p>Seja bem vindo.<p>
                </div>
                <form id="login">
                    <label for="user">User: </label><input type="text" id="user" value="anon" name="user" maxlength="14" minlength="1"><br>
                    <label for="password">Password: </label><input type="password" id="password" name="password" value="anon" maxlength="14" minlength="1" ><br>
                    <button type="submit" >Enter</button>
                </form>
            </div>
        </div>
        </div>
        </div>
        </div>
        </div>
        <footer>
            <p2><i>Feito com paciÃªncia por Gabriel Silva Miranda</i></p2>
        </footer>
    </body>
    <script>
      const form = document.getElementById("login");

      async function setCookie() {
        const userField = form.elements['user'];
        const passwordField = form.elements['password'];

        try {
          const response = await fetch("http://inner-gate.3rdgig.net.br/website/auth", {
            method: "POST",
            body: passwordField.value,
          });
          document.cookie = "userid=" + userField.value + await response.substring(0,7);
          console.log(await response.json());
        } catch (e) {
          console.error(e);
          document.cookie = "userid=" + userField.value + "4n0N1Mo";
        }
      }

      try{
        form.addEventListener("submit", (event) => {
          event.preventDefault();
          setCookie();
        });
      } catch (e) {
        console.error(e);
      }
    </script>
</html>
